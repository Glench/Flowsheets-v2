<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Flowsheets v2</title>

    <!-- for more production-ready, use static css below -->
    <!-- <link type="text/css" href="style.css" /> -->

    <style></style>
    <script>
      const less = require('less');
      const fs = require('fs');

      function recompile_css() {
        // @Cleanup @Speed reading the file and recompiling every second is probably hella slow,
        // but hot-loading style changes is hella tight.
        less.render(fs.readFileSync(__dirname+'/../src/style.less').toString(), function(e, cssObj) {
          if (e) throw e;
          var currentCss = document.querySelector('style').innerText
          if (currentCss !== cssObj.css) {
            document.querySelector('style').innerText = cssObj.css;
          }
        })
      }

      recompile_css();
      setInterval(recompile_css, 1000)
    </script>



  </head>
  <body>
    <table id="main">

      <tr>
        <td><input name="code" placeholder="Code"/></td>
      </tr>
      <tr>
        <th><input name="name" placeholder="Value name"/></th>
      </tr>
      <tr>
        <td class="output"></td>
      </tr>

    </table>


    <script>
      const ui = require('./renderer.js')
      const interpreter = require('./interpreter.js')
      const $ = require('jquery')

      // make sure to kill the python process or else it will keep running after electron exits
      process.on('exit', () => {
          interpreter.python_interpreter.kill()
      })

    </script>
  </body>

</html>
